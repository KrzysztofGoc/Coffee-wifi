{% extends "base.html" %}



{% block title %}
<title>All Cafes</title>
{% endblock %}


{% block content %}
{{ super() }}

<div class="container pt-5">
  <div class="row align-items-center">
    <div class="col-sm-12">

      <h1>All Cafes</h1>

	  <table class="table">
        <thead>
                <th scope="col">Cafe Name</th>
                <th scope="col">Location</th>
                <th scope="col">Open</th>
                <th scope="col">Close</th>
                <th scope="col">Coffee</th>
                <th scope="col">Wifi</th>
                <th scope="col">Power</th>
                {% if current_user.is_authenticated %}
                    <th scope="col"></th>
                    <th scope="col"></th>
                {% endif %}
        </thead>
        <tbody>
        {% for cafe in cafes %}
                <tr>
                    <td>{{ cafe.name }}</td>
                    <td><a href="{{ cafe.location }}" target="_blank">Map location</a></td>
                    <td>{{ cafe.open_time.strftime("%H:%M") }}</td>
                    <td>{{ cafe.close_time.strftime("%H:%M") }}</td>
                    <td>{{ cafe.coffee_quality }}</td>
                    <td>{{ cafe.wifi_speed }}</td>
                    <td>{{ cafe.power_socket }}</td>
                    {% if current_user.is_authenticated %}
                        {% if current_user.id == cafe.user.id %}
                            <td><a href="{{ url_for("edit", cafe_id=cafe.id) }}">Edit</a></td>
                            <td><a href="{{ url_for("delete", cafe_id=cafe.id) }}">Delete</a></td>
                        {% else  %}
                            <td> </td>
                            <td> </td>
                        {% endif %}
                    {% endif %}
                </tr>
        {% endfor %}
        </tbody>
  	  </table>
    <p style="display: flex; justify-content: space-between;" >
            <a href="{{ url_for('index') }}">Return to index page</a>
            <a style="text-align: right;" href="{{ url_for('add') }}">Add new cafe</a>
    </p>

    </div>
  </div>
</div>

{% endblock %}